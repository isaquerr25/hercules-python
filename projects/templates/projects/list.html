{% load set_title htmx_csrf_token %}
{% set_title 'Select a Project' %}

<dialog
    id="new-project-dialog"
    class="w-[90vw] md:w-[40vw]"
></dialog>

<div class="rounded-xl bg-white w-[calc(100%-2rem)] h-[calc(100%-2rem)] flex flex-col gap-4 p-4 relative">
    <h1 class="text-green-800 text-2xl font-bold text-center">Projects</h1>
    <div class="text-2xl text-center min-w-[5rem] w-1/12 absolute right-4 top-4">
        <button
            hx-get="{% url 'projects:new_project' %}"
            hx-target="#new-project-dialog"
            hx-swap="innerHTML"
            class="w-8 h-8 rounded-full text-green-700 hover:text-green-800 bg-green-800 bg-opacity-5 hover:bg-opacity-30 transition"
            title="Create new project"
        >
            <i class="fa-solid fa-plus"></i>
        </button>
    </div>

    {% if page_obj %}
        <table class="table-auto border-separate border-spacing-0">
            <tbody>
                {% for project in page_obj %}
                    <tr
                        class="group odd:bg-gray-50 hover:bg-gray-100 odd:hover:bg-gray-200 transition text-xl cursor-pointer"
                        hx-put="{% url 'projects:select_project' %}?project_id={{ project.pk }}"
                        hx-swap="none"
                        {% htmx_csrf_token %}
                    >
                        <td class="p-2 border-transparent border-b-2 group-hover:border-b-green-700 transition">{{ project.name }}</td>
                        <td
                            class="min-w-[5rem] w-1/12 p-2 text-green-700 text-center border-transparent border-b-2 group-hover:border-b-green-700 transition">
                            <i class="fa-solid fa-arrow-right"></i>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    
        {% include 'partials/list/nav.html' with page=page_obj.number min=1 max=page_obj.paginator.num_pages %}
    {% else %}
        <div class="text-green-800 text-opacity-50 font-bold text-center flex-1 flex flex-col gap-4 justify-center items-center">
            <i class="fa-solid fa-diagram-project text-9xl md:text-[12rem]"></i>
            <p class="text-2xl md:text-4xl">No projects found!</p>
            <p class="text-lg md:text-2xl">You can create a new project or ask for your manager to invite you to their project.</p>
        </div>
    {% endif %}
</div>
